/*!
 * @author      Angelo Dini - github.com/finalangel/classjs-plugins
 * @copyright   Distributed under the BSD License.
 * @version     1.2.3
 * @contributer Vanessa HÃ¤nni, Vadim Sikora
 */
var Cl=window.Cl||{};!function(e){"use strict";Cl.Uniform=new Class({options:{offset:-9999,cls:{prefix:"uniform",radio:"radio",checkbox:"checkbox",file:"file",select:"select",disabled:"disabled",focus:"focus",ready:"ready",checked:"checked"},lang:{fileBtn:"Upload",fileStatus:"Please select a file..."},tpl:{knob:'<span class="{knob}"></span>',radio:'<span class="{cls}" role="radio"><!-- radio --></span>',checkbox:'<span class="{cls}" role="checkbox"><!-- checkbox --></span>',file:'<label class="{cls}"><span class="{input}"><!-- file --></span><span class="{btn}" aria-hidden="true">{btntext}</span><span class="{status}" aria-hidden="true">{statustext}</span></label>',select:'<span class="{cls}"><span class="{input}"><!-- select --></span><span class="{status}" aria-hidden="true"></span><span class="{arrow}"></span></span>'}},initialize:function(s,t){this.elements=e(s),this.options=e.extend(!0,{},this.options,t),this._setup()},_setup:function(){var s=this;this.callbacks={},this.elements.each(function(t,i){s._scan(e(i))})},update:function(){var s=this;this.destroy(),this.elements.each(function(t,i){s._scan(e(i))}),this._fire("update")},destroy:function(){var s=this.options.cls;this.elements.each(function(t,i){var a=e(i);a.is("select")||a.is("[type=file]")?(a.unwrap(),a.siblings("span").remove(),a.unwrap()):(a.siblings("span").remove(),a.unwrap()),a.removeAttr("style").removeClass(s.prefix+"-"+s.ready).off("click."+s.prefix).off("change."+s.prefix).off("focus."+s.prefix).off("blur."+s.prefix).data("ready",!1)}),this._fire("destroy")},_scan:function(e){if(e.data("ready"))return!1;switch(e.attr("type")){case"checkbox":this._setupRadioCheck(e,"checkbox");break;case"radio":this._setupRadioCheck(e,"radio");break;case"file":this._setupFile(e);break;case void 0:"SELECT"===e.prop("tagName")&&void 0===e.attr("multiple")&&this._setupSelect(e)}},_setupRadioCheck:function(s,t){var i=this.options.cls,a=i.prefix+" "+i.prefix+"-"+i[t],r=i.prefix+"-"+i[t]+"-knob",c=i.prefix+"-"+i.checked,n=e(this.options.tpl[t].replace("{cls}",a)),o=e(this.options.tpl.knob.replace("{knob}",r));s.wrap(n).parent().append(o);var p=s.parents("."+i.prefix),l=function(s,t){var a,n,o=!1;"checkbox"===t?(o=s.is(":checked"),a=s.siblings("."+r),a[o?"show":"hide"](),p[o?"addClass":"removeClass"](c),p.attr("aria-checked",o)):(n=e(':radio[name="'+s.attr("name")+'"]'),n.each(function(){var s=e(this),t=s.siblings("."+r),a=s.parents("."+i.prefix),n=s.is(":checked");t[n?"show":"hide"](),a[n?"addClass":"removeClass"](c),a.attr("aria-checked",n)}))};s.on("click."+i.prefix,function(s){s.stopPropagation();var a=e(this),r=!1,c=this.checked;return a.is(":disabled")?!1:(r="checkbox"===t?a.is(":checked"):!0,a.trigger("focus"),c!==r&&a.attr("checked",r).trigger("change"),void a.trigger(i.prefix+"change"))}).on("change."+i.prefix,function(s){s.stopPropagation();var i=e(this);l(i,t)}),p.on("click."+i.prefix,function(s){s.preventDefault(),s.stopPropagation();var t=e(this).find("input");t.trigger("click")}),s.is(":checked")?(p.attr("aria-checked",!0).addClass(c),s.siblings("."+r).show()):(p.attr("aria-checked",!1).removeClass(c),s.siblings("."+r).hide()),this._common(s)},_setupFile:function(s){var t=this.options.cls,i=t.prefix+" "+t.prefix+"-"+t.file,a=t.prefix+" "+t.prefix+"-input",r=t.prefix+"-"+t.file+"-btn",c=t.prefix+"-"+t.file+"-status",n=e(this.options.tpl.file.replace("{cls}",i).replace("{input}",a).replace("{btn}",r).replace("{btntext}",this.options.lang.fileBtn).replace("{status}",c).replace("{statustext}",this.options.lang.fileStatus));n.css({width:s.css("width"),padding:s.css("padding"),margin:s.css("margin")}),s.wrap(n).css("left",this.options.offset),s.on("change."+t.prefix,function(){var s=e(this).val().replace(/^C:\\fakepath\\/i,"");e(this).parents("."+t.prefix).find("."+c).text(s)});var o=s.parents("."+t.prefix);o.attr("for",s.attr("id")),this._common(s)},_setupSelect:function(s){var t=this.options.cls,i=t.prefix+" "+t.prefix+"-"+t.select,a=t.prefix+" "+t.prefix+"-input",r=t.prefix+"-"+t.select+"-status",c=t.prefix+"-"+t.select+"-arrow",n=e(this.options.tpl.select.replace("{cls}",i).replace("{input}",a).replace("{status}",r).replace("{arrow}",c)),o=s.outerWidth();n.css({width:o,padding:s.css("padding"),margin:s.css("margin")}),s.wrap(n).css("opacity",0);var p=s.parents("."+t.prefix),l=p.find("."+r);s.on("change keyup",function(){l.text(e(this).find("option:selected").text())}),l.text(s.find("option:selected").text()),s.css("width",o),s.closest(".uniform.uniform-select").css("width",o),s.css("width",n.outerWidth(!0)),this._common(s)},_common:function(s){var t=this.options.cls,i=s.parents("."+t.prefix).last();s.on("focus."+t.prefix+" blur."+t.prefix,function(s){var i=e(this).parents("."+t.prefix),a=t.prefix+"-"+t.focus;"focus"===s.type?i.addClass(a):i.removeClass(a)}),s.is(":disabled")&&i.addClass(t.prefix+"-"+t.disabled),s.attr("required")&&i.attr("aria-required",!0),s.addClass(t.prefix+"-"+t.ready),s.data("ready",!0),i.addClass(s.attr("class"))},_fire:function(e){return void 0===this.callbacks[e]?!1:void this.callbacks[e](this)}})}(jQuery);