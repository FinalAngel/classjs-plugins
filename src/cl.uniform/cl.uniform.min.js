/*!
 * @author      Angelo Dini - github.com/finalangel/classjs-plugins
 * @copyright	Distributed under the BSD License.
 * @version     1.0.2
 */// insure namespace is defined
var Cl=window.Cl||{};(function(e){"use strict";Cl.Uniform=new Class({options:{offset:-9999,cls:{prefix:"uniform",radio:"radio",checkbox:"checkbox",file:"file",select:"select",disabled:"disabled",focus:"focus"},lang:{fileBtn:"Upload",fileStatus:"Please select a file..."},tpl:{radio:'<span class="{cls}" role="radio"><span class="{knob}"><!-- radio --></span></span>',checkbox:'<span class="{cls}" role="checkbox"><span class="{knob}"><!-- checkbox --></span></span>',file:'<span class="{cls}"><span class="{input}"><!-- file --></span><span class="{btn}">{btntext}</span><span class="{status}">{statustext}</span></span>',select:'<span class="{cls}"><span class="{input}"><!-- select --></span><span class="{status}"></span><span class="{arrow}"></span></span>'}},initialize:function(t,n){this.elements=e(t);this.options=e.extend(!0,{},this.options,n);this._setup()},_setup:function(){var t=this;this.callbacks={};this.elements.each(function(n,r){t._scan(e(r))})},update:function(){this.elements.each(function(t,n){var r=e(n);r.is(":checked")&&r.trigger("click");r.trigger("change")});this._fire("update")},destroy:function(){var t=this.options.cls;this.elements.each(function(n,r){var i=e(r);i.parent().siblings("span").remove();i.unwrap().unwrap().removeAttr("style").off("click."+t.prefix).off("change."+t.prefix).off("focus."+t.prefix).off("blur."+t.prefix).data("ready",!1)});this._fire("destroy")},_scan:function(e){if(e.data("ready"))return!1;switch(e.attr("type")){case"checkbox":this._setupRadioCheck(e,"checkbox");break;case"radio":this._setupRadioCheck(e,"radio");break;case"file":this._setupFile(e);break;case undefined:e.prop("tagName")==="SELECT"&&e.attr("multiple")===undefined&&this._setupSelect(e);break;default:}},_setupRadioCheck:function(t,n){var r=this,i=this.options.cls,s=i.prefix+" "+i.prefix+"-"+i[n],o=i.prefix+"-"+i[n]+"-knob",u=e(this.options.tpl[n].replace("{cls}",s).replace("{knob}",o));t.wrap(u).css("left",this.options.offset);t.on("click."+i.prefix,function(t){t.stopPropagation();var s=e(this),u=e(this).parents("."+o);if(s.is(":disabled"))return!1;if(n==="checkbox")parseInt(u.css("left"),10)===0||u.css("left")==="auto"?u.css("left",r.options.offset):u.css("left",0);else{s.closest("form").find('input[type="radio"][name="'+s.attr("name")+'"]').parents("."+o).css("left",r.options.offset);u.css("left",0)}s.trigger(i.prefix+"change");parseInt(u.css("left"),10)===0?a.attr("aria-checked",!0):a.attr("aria-checked",!1)});var a=t.parents("."+i.prefix);a.on("click."+i.prefix,function(t){t.preventDefault();t.stopPropagation();var n=e(this).find("input");n.trigger("click")});t.is(":checked")?a.attr("aria-checked",!0):a.attr("aria-checked",!1);t.is(":checked")||t.parents("."+i.prefix).children().css("left",this.options.offset);this._common(t)},_setupFile:function(t){var n=this.options.cls,r=n.prefix+" "+n.prefix+"-"+n.file,i=n.prefix+" "+n.prefix+"-input",s=n.prefix+"-"+n.file+"-btn",o=n.prefix+"-"+n.file+"-status",u=e(this.options.tpl.file.replace("{cls}",r).replace("{input}",i).replace("{btn}",s).replace("{btntext}",this.options.lang.fileBtn).replace("{status}",o).replace("{statustext}",this.options.lang.fileStatus));u.css({width:t.css("width"),height:t.css("height"),padding:t.css("padding"),margin:t.css("margin")});t.wrap(u).css("left",this.options.offset);t.on("click."+n.prefix,function(e){e.stopPropagation()});t.on("change."+n.prefix,function(){var t=e(this).val().replace(/^C:\\fakepath\\/i,"");e(this).parents("."+n.prefix).find("."+o).text(t)});var a=t.parents("."+n.prefix);a.on("click."+n.prefix,function(t){t.preventDefault();t.stopPropagation();var n=e(this).find("input");n.trigger("click")});this._common(t)},_setupSelect:function(t){var n=this.options.cls,r=n.prefix+" "+n.prefix+"-"+n.select,i=n.prefix+" "+n.prefix+"-input",s=n.prefix+"-"+n.select+"-status",o=n.prefix+"-"+n.select+"-arrow",u=e(this.options.tpl.select.replace("{cls}",r).replace("{input}",i).replace("{status}",s).replace("{arrow}",o));u.css({width:t.css("width"),height:t.css("height"),padding:t.css("padding"),margin:t.css("margin")});t.wrap(u).css("opacity",0);var a=t.parents("."+n.prefix),f=a.find("."+s);t.on("change",function(){f.text(e(this).find("option:selected").text())});f.text(t.find("option:selected").text());t.css("width",u.outerWidth(!0));this._common(t)},_common:function(t){var n=this.options.cls,r=t.parents("."+n.prefix).last();t.on("focus."+n.prefix+" blur."+n.prefix,function(t){var r=e(this).parents("."+n.prefix),i=n.prefix+"-"+n.focus;t.type==="focus"?r.addClass(i):r.removeClass(i)});t.is(":disabled")&&r.addClass(n.prefix+"-"+n.disabled);t.attr("required")&&r.attr("aria-required",!0);t.data("ready",!0);r.addClass(t.attr("class"))},_fire:function(e){if(this.callbacks[e]===undefined)return!1;this.callbacks[e](this)}})})(jQuery);