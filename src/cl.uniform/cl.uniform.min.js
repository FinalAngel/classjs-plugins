var Cl=window.Cl||{};!function(a){"use strict";Cl.Uniform=new Class({options:{offset:-9999,cls:{prefix:"uniform",radio:"radio",checkbox:"checkbox",file:"file",select:"select",disabled:"disabled",focus:"focus"},lang:{fileBtn:"Upload",fileStatus:"Please select a file..."},tpl:{radio:'<span class="{cls}" role="radio"><span class="{knob}"><!-- radio --></span></span>',checkbox:'<span class="{cls}" role="checkbox"><span class="{knob}"><!-- checkbox --></span></span>',file:'<span class="{cls}"><span class="{input}"><!-- file --></span><span class="{btn}" aria-hidden="true">{btntext}</span><span class="{status}" aria-hidden="true">{statustext}</span></span>',select:'<span class="{cls}"><span class="{input}"><!-- select --></span><span class="{status}" aria-hidden="true"></span><span class="{arrow}"></span></span>'}},initialize:function(b,c){this.elements=a(b),this.options=a.extend(!0,{},this.options,c),this._setup()},_setup:function(){var b=this;this.callbacks={},this.elements.each(function(c,d){b._scan(a(d))})},update:function(){var b=this;this.destroy(),this.elements.each(function(c,d){b._scan(a(d))}),this._fire("update")},destroy:function(){var b=this.options.cls;this.elements.each(function(c,d){var e=a(d);e.parent().siblings("span").remove(),e.unwrap().unwrap().removeAttr("style").off("click."+b.prefix).off("change."+b.prefix).off("focus."+b.prefix).off("blur."+b.prefix).data("ready",!1)}),this._fire("destroy")},_scan:function(a){if(a.data("ready"))return!1;switch(a.attr("type")){case"checkbox":this._setupRadioCheck(a,"checkbox");break;case"radio":this._setupRadioCheck(a,"radio");break;case"file":this._setupFile(a);break;case void 0:"SELECT"===a.prop("tagName")&&void 0===a.attr("multiple")&&this._setupSelect(a)}},_setupRadioCheck:function(b,c){var d=this,e=this.options.cls,f=e.prefix+" "+e.prefix+"-"+e[c],g=e.prefix+"-"+e[c]+"-knob",h=a(this.options.tpl[c].replace("{cls}",f).replace("{knob}",g));b.wrap(h).css("left",this.options.offset),b.on("click."+e.prefix,function(b){b.stopPropagation();var f=a(this),h=a(this).parents("."+g);return f.is(":disabled")?!1:("checkbox"===c?0===parseInt(h.css("left"),10)||"auto"===h.css("left")?h.css("left",d.options.offset):h.css("left",0):(f.closest("form").find('input[type="radio"][name="'+f.attr("name")+'"]').parents("."+g).css("left",d.options.offset),h.css("left",0)),0===parseInt(h.css("left"),10)?i.attr("aria-checked",!0):i.attr("aria-checked",!1),f.trigger(e.prefix+"change"),void 0)});var i=b.parents("."+e.prefix);i.on("click."+e.prefix,function(b){b.preventDefault(),b.stopPropagation();var c=a(this).find("input");c.trigger("click")}),b.is(":checked")?i.attr("aria-checked",!0):i.attr("aria-checked",!1),b.is(":checked")||b.parents("."+e.prefix).children().css("left",this.options.offset),this._common(b)},_setupFile:function(b){var c=this.options.cls,d=c.prefix+" "+c.prefix+"-"+c.file,e=c.prefix+" "+c.prefix+"-input",f=c.prefix+"-"+c.file+"-btn",g=c.prefix+"-"+c.file+"-status",h=a(this.options.tpl.file.replace("{cls}",d).replace("{input}",e).replace("{btn}",f).replace("{btntext}",this.options.lang.fileBtn).replace("{status}",g).replace("{statustext}",this.options.lang.fileStatus));h.css({width:b.css("width"),height:b.css("height"),padding:b.css("padding"),margin:b.css("margin")}),b.wrap(h).css("left",this.options.offset),b.on("click."+c.prefix,function(a){a.stopPropagation()}),b.on("change."+c.prefix,function(){var b=a(this).val().replace(/^C:\\fakepath\\/i,"");a(this).parents("."+c.prefix).find("."+g).text(b)});var i=b.parents("."+c.prefix);i.on("click."+c.prefix,function(b){b.preventDefault(),b.stopPropagation();var c=a(this).find("input");c.trigger("click")}),this._common(b)},_setupSelect:function(b){var c=this.options.cls,d=c.prefix+" "+c.prefix+"-"+c.select,e=c.prefix+" "+c.prefix+"-input",f=c.prefix+"-"+c.select+"-status",g=c.prefix+"-"+c.select+"-arrow",h=a(this.options.tpl.select.replace("{cls}",d).replace("{input}",e).replace("{status}",f).replace("{arrow}",g));h.css({width:b.css("width"),height:b.css("height"),padding:b.css("padding"),margin:b.css("margin")}),b.wrap(h).css("opacity",0);var i=b.parents("."+c.prefix),j=i.find("."+f);b.on("change keyup",function(){j.text(a(this).find("option:selected").text())}),j.text(b.find("option:selected").text()),b.css("width",h.outerWidth(!0)),this._common(b)},_common:function(b){var c=this.options.cls,d=b.parents("."+c.prefix).last();b.on("focus."+c.prefix+" blur."+c.prefix,function(b){var d=a(this).parents("."+c.prefix),e=c.prefix+"-"+c.focus;"focus"===b.type?d.addClass(e):d.removeClass(e)}),b.is(":disabled")&&d.addClass(c.prefix+"-"+c.disabled),b.attr("required")&&d.attr("aria-required",!0),b.data("ready",!0),d.addClass(b.attr("class"))},_fire:function(a){return void 0===this.callbacks[a]?!1:(this.callbacks[a](this),void 0)}})}(jQuery);