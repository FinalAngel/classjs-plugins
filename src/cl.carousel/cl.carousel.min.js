/*!
 * @author      Angelo Dini - github.com/finalangel/classjs-plugins
 * @copyright	Distributed under the BSD License.
 * @version     1.3.2
 */// ensure namespace is defined
var Cl=window.Cl||{};(function(e){"use strict";Cl.Carousel=new Class({options:{index:null,timeout:null,autoplay:!1,easing:"linear",duration:300,move:"auto",momentum:!0,cls:{active:"active",disabled:"disabled",wrapper:".wrapper",viewport:".viewport",elements:".item",next:".trigger-next a",previous:".trigger-previous a",navigation:"nav a"}},initialize:function(t,n){this.container=e(t);this.options=e.extend(!0,{},this.options,n);this.wrapper=this.container.find(this.options.cls.wrapper);this.viewport=this.wrapper.find(this.options.cls.viewport);this.elements=this.viewport.find(this.options.cls.elements);this.navigation=this.container.find(this.options.cls.navigation);this.index=null;this.bound=this.elements.length;this.realBound=this._setBound();this.timer=function(){};this.callbacks={};this.width=null;this.triggers={next:this.container.find(this.options.cls.next),previous:this.container.find(this.options.cls.previous)};var r=this;jQuery(window).load(function(){r._setup()})},_setup:function(){var t=this;this.viewport.css("width",this.elements.length*this.elements.outerWidth(!0));this.wrapper.css("height",this.viewport.height());if(this.bound<Math.ceil(this.wrapper.outerWidth(!0)/this.elements.eq(0).outerWidth(!0))){this.triggers.next.hide();this.triggers.previous.hide();return!1}this.triggers.next.on("click",function(e){e.preventDefault();t.options.autoplay||(t.options.timeout=null);t.next()});this.triggers.previous.on("click",function(e){e.preventDefault();t.options.autoplay||(t.options.timeout=null);t.previous()});this.navigation.on("click",function(n){n.preventDefault();t.options.autoplay||(t.options.timeout=null);t.move(t.navigation.index(e(this)))});this.navigation.show();this.triggers.next.show();this.triggers.previous.show();this.move(this.options.index||0)},next:function(){this.move(this.index+1);this._fire("next")},previous:function(){this.move(this.index-1);this._fire("previous")},move:function(e){if(e===this.index)return!1;this.index=this._setIndex(e);this.autoplay&&this.stop();this.options.timeout>0&&this.play();!this.options.momentum&&this.index>=this.realBound-1&&this.stop();this.viewport.stop().animate({left:-(this.width*this.index)},this.options.duration,this.options.easing);this.triggers.next.removeClass(this.options.cls.disabled);this.triggers.previous.removeClass(this.options.cls.disabled);this.navigation.hide().filter(":lt("+this.realBound+")").show();this.navigation.removeClass(this.options.cls.active);this.navigation.eq(this.index).addClass(this.options.cls.active);this.index<=0&&!this.options.momentum&&this.triggers.previous.addClass(this.options.cls.disabled);this.index>=this.realBound-1&&!this.options.momentum&&this.triggers.next.addClass(this.options.cls.disabled);this._accessibility();this._fire("move")},play:function(){var e=this;this.timer=setInterval(function(){e.next()},this.options.timeout);this.autoplay=!0;this._fire("play")},stop:function(){clearInterval(this.timer);this.autoplay=!1;this._fire("stop")},update:function(){this.move(this.index);this._fire("update")},destroy:function(){this.viewport.removeAttr("style");this.wrapper.removeAttr("style");this.triggers.next.removeAttr("style");this.triggers.previous.removeAttr("style");this.triggers.next.off("click");this.triggers.previous.off("click");this.navigation.off("click");this.elements.removeAttr("aria-hidden").removeAttr("aria-selected");this.stop();this._fire("destroy")},_setIndex:function(e){var t=this.elements.eq(0).outerWidth(!0),n=Math.floor(this.wrapper.width()/t),r=this._setBound();this.width=t;this.options.move==="auto"&&(this.width=t*n);e<0&&(e=this.options.momentum?r-1:0);e>=r&&(e=this.options.momentum?0:r-1);return this.index=e},_setBound:function(){var e=this.elements.eq(0).outerWidth(!0),t=Math.floor(this.wrapper.width()/e);this.options.move==="auto"?this.realBound=Math.ceil(this.bound/t):this.realBound=this.bound;return this.realBound},_accessibility:function(){var e=this,t=this.elements.eq(0).outerWidth(!0),n=Math.floor(this.wrapper.width()/t),r=null;this.elements.attr("aria-hidden",!0).attr("aria-selected",!1);this.elements.eq(this.index).attr("aria-selected",!0);for(var i=0;i<n;i++){r=e.index*n;e.options.move==="single"&&(r=e.index);this.elements.eq(r+i).attr("aria-hidden",!1)}},_fire:function(e){if(this.callbacks[e]===undefined)return!1;this.callbacks[e](this)}})})(jQuery);