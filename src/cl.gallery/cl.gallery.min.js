/*!
 * @author      Aleš Kocjančič, Angelo Dini - github.com/finalangel/classjs-plugins
 * @copyright	Distributed under the BSD License.
 * @version     2.0.1
 */// ensure namespace is defined
var Cl=window.Cl||{};(function(e){"use strict";Cl.Gallery=new Class({options:{index:null,timeout:5e3,autoplay:!1,easing:"linear",duration:300,autoHeight:!0,engine:"slide",cls:{active:"active",wrapper:".wrapper",viewport:".viewport",elements:".item",next:".trigger-next a",previous:".trigger-previous a",navigation:"nav a"}},initialize:function(t,n){this.container=e(t);this.options=e.extend(!0,{},this.options,n);this.wrapper=this.container.find(this.options.cls.wrapper);this.viewport=this.container.find(this.options.cls.viewport);this.elements=this.container.find(this.options.cls.elements);this.navigation=this.container.find(this.options.cls.navigation);this.triggers={next:this.container.find(this.options.cls.next),previous:this.container.find(this.options.cls.previous)};this.index=null;this.bound=this.elements.length;this.direction="";this.queue=!1;this.autoplay=!1;this.timer=function(){};this.callbacks={};var r=this;jQuery(window).load(function(){r.elements.length>0&&r._setup()})},_setup:function(){var t=this;this.options.autoHeight&&this._setHeight();this.triggers.next.on("click",function(e){e.preventDefault();t.options.autoplay||(t.options.timeout=null);t.next()});this.triggers.previous.on("click",function(e){e.preventDefault();t.options.autoplay||(t.options.timeout=null);t.previous()});this.navigation.on("click",function(n){n.preventDefault();t.options.autoplay||(t.options.timeout=null);t.move(t.navigation.index(e(this)),"random")});this.navigation.show();this.triggers.next.show();this.triggers.previous.show();this.move(this.options.index||0,"setup")},next:function(){this._fire("next");this.move(this.index+1,"next");this._fire("next",this)},previous:function(){this._fire("previous");this.move(this.index-1,"previous");this._fire("previous",this)},move:function(e,t){this._fire("move");var n=this;if(this.queue)return!1;this.options.autoHeight&&this._setHeight();if(e===this.index)return!1;this.index=this._setIndex(e);this.autoplay&&this.stop();this.options.timeout>0&&this.play();this.direction=t||"next";this._accessibility();this.navigation.removeClass(this.options.cls.active);this.navigation.eq(this.index).addClass(this.options.cls.active);this.engine[this.options.engine].call(this);this._fire("move",this);setTimeout(function(){n.queue=!1},this.options.duration)},play:function(){this._fire("play");var e=this;this.timer=setInterval(function(){e.next()},this.options.timeout);this.autoplay=!0;this._fire("play",this)},stop:function(){this._fire("stop");clearInterval(this.timer);this.autoplay=!1;this._fire("stop",this)},update:function(){this._fire("update");this.move(this.index);this._fire("update",this)},engine:{fade:function(){this.queue=!0;if(this.direction==="setup"){this.queue=!1;this.elements.hide();this.elements.eq(0).show()}else{this.elements.fadeOut(this.options.duration,this.options.transition);this.elements.eq(this.index).fadeIn(this.options.duration,this.options.transition)}},slide:function(){this.queue=!0;if(this.direction==="setup"){this.elements.show().css("left",-9999);var t=this.elements.eq(this.index);t.css("left",0).show();this.queue=!1}else{var n=this.viewport.outerWidth(),r=this.elements.filter(function(){return parseInt(e(this).css("left"))===0});r.animate({left:this.direction==="previous"?n:-n},this.options.duration,this.options.transition,function(){e(this).css("left",-9999)});this.elements.eq(this.index).css("left",this.direction==="previous"?-n:n).animate({left:0},this.options.duration,this.options.transition)}}},_setIndex:function(e){e<0&&(e=this.bound-1);e>=this.bound&&(e=0);return e},_setHeight:function(){var t=null;this.elements.each(function(n,r){var i=e(r);t<i.outerHeight(!0)&&(t=i.outerHeight(!0))});this.wrapper.css("height",t)},_accessibility:function(){this.elements.attr("aria-hidden",!0).attr("aria-selected",!1);this.elements.eq(this.index).attr("aria-hidden",!1).attr("aria-selected",!0)},_fire:function(t,n){if(n){if(this.callbacks[t]===undefined)return!1;this.callbacks[t](n)}else e.event.trigger("gallery-"+t)}})})(jQuery);