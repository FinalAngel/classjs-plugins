/*!
 * @author      Angelo Dini - github.com/finalangel/classjs-plugins
 * @copyright	Distributed under the BSD License.
 * @version     1.1.2
 */// ensure namespace is defined
var Cl=window.Cl||{};(function(e){"use strict";Cl.MobileMenu=new Class({options:{easing:"linear",duration:300,bound:539,ratio:.7,offset:{left:0,top:0},cls:{menu:".mainnav",inner:"> ul",knob:".mainnav-knob"},overlay:'<div class="mainnav-overlay"></div>'},initialize:function(t){this.options=e.extend(!0,{},this.options,t);this.html=e("html");this.body=e("body");this.menu=e(this.options.cls.menu);this.knob=e(this.options.cls.knob);this.overlay=e(this.options.overlay);this.initialized=!1;this.visible=!1;this.timer=function(){};this.width=null;this.height=this.menu.outerHeight(!0);this.callbacks={};this._setup()},_setup:function(){var t=this;this.menu.attr("aria-expanded",!1);this.knob.on("click",function(e){e.preventDefault();t.toggle()});this.overlay.on("click",function(){t.hide()});this.menu.on("focusin focusout",function(n){if(e(window).width()>=t.options.bound)return!1;clearTimeout(t.timer);t.timer=setTimeout(function(){n.type==="focusin"?t.show():t.hide(0)},50)});e(window).on("resize.menu",function(){t.visible&&e(window).width()>=t.options.bound&&t.hide(0);t.menu.height("auto")})},toggle:function(){this._fire("toggle");this.visible?this.hide():this.show();this.initialized||this.body.append(this.overlay);this.initialized=!0;this._fire("toggle",this)},show:function(t){this._fire("show");this.menu.attr("aria-expanded",!0);this.visible||(this.width=e(window).width()*this.options.ratio);this.html.animate({"margin-left":this.width},t!==undefined?t:this.options.duration,this.options.easing).css("width",e(window).width()).css("overflow-x","hidden");var n=e(window).height()>this.body.height()?e(window).height():this.body.height();this.height>n&&(n=this.height);this.menu.css({width:this.width,height:n+1,top:this.options.offset.top,left:-this.width+this.options.offset.left});this.overlay.show();this.visible=!0;this._fire("show",this)},hide:function(e){this._fire("hide");var t=this;this.menu.attr("aria-expanded",!1);this.html.animate({"margin-left":0},e!==undefined?e:this.options.duration,this.options.easing,function(){t.menu.removeAttr("style");t.html.removeAttr("style")});this.overlay.hide();this.visible=!1;this._fire("hide",this)},_fire:function(t,n){if(n){if(this.callbacks[t]===undefined)return!1;this.callbacks[t](n)}else e.event.trigger("mobilemenu-"+t)}})})(jQuery);